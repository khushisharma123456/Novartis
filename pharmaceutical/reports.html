< !DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Safety Reports - MedSafe</title><link rel="stylesheet" href="../css/style.css"><script src="https://unpkg.com/lucide@latest"></script><script type="module" src="../js/sidebar.js"></script></head><body><div class="dashboard-layout"><app-sidebar></app-sidebar><main class="main-content"><header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;"><div><h1>Safety Reports</h1><p>Comprehensive adverse event registry</p></div><button class="btn btn-outline" onclick="alert('Exporting CSV...')"><i data-lucide="download"></i>Export Data </button></header><div class="card"><table id="reports-table"><thead><tr><th>Report ID</th><th>Date</th><th>Medication</th><th>Side Effects</th><th>Risk Level</th></tr></thead><tbody>< !-- Dynamic --><tr><td colspan="5" style="text-align: center;">Loading...</td></tr></tbody></table></div></main></div><script type="module">import {
    Auth
}

from '../js/auth.js';

import {
    PharmaApp
}

from '../js/pharma.js';

Auth.requireAuth();
lucide.createIcons();

const data=PharmaApp.getAllData().reverse();
const tbody=document.querySelector('#reports-table tbody');

if (data.length > 0) {
    tbody.innerHTML=data.map(p=> ` <tr> <td style="font-family: monospace; font-weight: 500;" >$ {
            p.id
        }

        </td> <td>$ {
            new Date(p.created_at).toLocaleDateString()
        }

        </td> <td>$ {
            p.drugName || 'N/A'
        }

        </td> <td>$ {
            p.symptoms || 'None'
        }

        </td> <td>$ {
            DoctorApp_renderBadge(p.riskLevel)
        }

        </td> </tr> `).join('');
}

else {
    tbody.innerHTML='<tr><td colspan="5" style="text-align: center; padding: 2rem;">No reports found in the registry.</td></tr>';
}

// Helper since DoctorApp isn't imported
function DoctorApp_renderBadge(level) {
    const type=level.toLowerCase();

    return `<span class="badge badge-${type}">$ {
        level
    }

    </span>`;
}

</script></body></html>