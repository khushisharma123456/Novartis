<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Login - Inteleyzer</title><link rel="stylesheet" href="/static/css/style.css"><script src="https://unpkg.com/lucide@latest"></script><style>

/* ... style omitted ... */
body {
    display: flex;
    min-height: 100vh;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--secondary) 0%, #E2E8F0 100%);
    background-image: url('{{ url_for("static", filename="images/section1/bg.jpg") }}');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    margin: 0;
    padding: 1rem;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(12px);
    filter: grayscale(20%);
    z-index: -1;
}

.auth-card {
    width: 100%;
    max-width: 400px;
    background: white;
    padding: 2.5rem;
    border-radius: 16px;
    box-shadow: var(--shadow-md);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.8);
}

.role-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
}

.role-btn {
    padding: 1rem;
    border: 2px solid #E2E8F0;
    border-radius: 12px;
    background: white;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    font-weight: 500;
    color: var(--text-muted);
}

.role-btn:hover {
    border-color: var(--primary);
    background-color: var(--secondary);
}

.role-btn.active {
    border-color: var(--primary);
    background-color: var(--primary);
    color: white;
}

.role-btn i {
    display: block;
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
}

.login-form {
    display: none;
}

.login-form.active {
    display: block;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: auto;
    height: auto;
    background-color: transparent;
    pointer-events: none;
}

.modal.show {
    display: block;
    pointer-events: auto;
}

.auth-card.modal-blur {
    filter: blur(10px);
}

.modal-content {
    background-color: white;
    padding: 2.5rem;
    border-radius: 16px;
    text-align: center;
    max-width: 350px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease-out;
    position: relative;
    z-index: 1001;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-content h2 {
    color: var(--charcoal);
    margin-bottom: 1rem;
    font-size: 1.3rem;
    font-weight: 600;
}

.modal-content p {
    color: var(--slate);
    margin-bottom: 2rem;
    line-height: 1.6;
    font-size: 0.95rem;
}

.modal-buttons {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
}

.modal-btn {
    padding: 0.65rem 1.25rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s;
}

.modal-btn-primary {
    background-color: var(--primary);
    color: white;
    flex: 1;
}

.modal-btn-primary:hover {
    background-color: var(--primary-dark);
}

.modal-btn-secondary {
    background-color: transparent;
    color: var(--primary);
    border: 2px solid var(--primary);
    flex: 1;
}

.modal-btn-secondary:hover {
    background-color: var(--secondary);
}

</style></head><body><div class="auth-card"><div style="text-align: center; margin-bottom: 2rem;"><img src="{{ url_for('static', filename='images/logo.jpeg') }}" alt="Inteleyzer Logo" style="width: 48px; height: 48px; border-radius: 12px; margin: 0 auto 1rem auto; object-fit: cover;"><h2>Welcome Back</h2><p>Login to your secure dashboard</p></div><div class="role-selector"><button type="button" class="role-btn" data-role="doctor" onclick="selectRole('doctor')"><i data-lucide="stethoscope"></i>Doctor</button><button type="button" class="role-btn" data-role="pharma" onclick="selectRole('pharma')"><i data-lucide="pill"></i>Pharma</button><button type="button" class="role-btn" data-role="hospital" onclick="selectRole('hospital')"><i data-lucide="building-2"></i>Hospital</button><button type="button" class="role-btn" data-role="pharmacy" onclick="selectRole('pharmacy')"><i data-lucide="package"></i>Pharmacy</button></div><form id="login-form" class="login-form active" method="POST"><div class="form-group"><label>Email Address</label><input type="email" name="email" required placeholder="john@hospital.com"></div><div class="form-group"><label>Password</label><input type="password" name="password" required placeholder="••••••••"></div><button type="submit" class="btn btn-primary" style="width: 100%;">Login</button><p style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem;">New to Inteleyzer? <a href="/signup" style="color: var(--primary-dark); font-weight: 600;">Create Account</a></p></form></div><div id="signupModal" class="modal">
    <div class="modal-content">
        <h2>Account Not Found</h2>
        <p>It looks like you haven't signed up yet. Please create an account first to access your dashboard.</p>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-secondary" onclick="closeModal()">Go Back</button>
            <button class="modal-btn modal-btn-primary" onclick="goToSignup()">Sign Up Now</button>
        </div>
    </div>
</div><script>
let selectedRole = '';

function selectRole(role) {
    selectedRole = role;
    
    // Update button states
    document.querySelectorAll('.role-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-role="${role}"]`).classList.add('active');
    
    lucide.createIcons();
}

function showModal() {
    document.getElementById('signupModal').classList.add('show');
    document.querySelector('.auth-card').classList.add('modal-blur');
}

function closeModal() {
    document.getElementById('signupModal').classList.remove('show');
    document.querySelector('.auth-card').classList.remove('modal-blur');
}

function goToSignup() {
    window.location.href = '/signup';
}

// Close modal when clicking outside of it
window.onclick = function(event) {
    const modal = document.getElementById('signupModal');
    const modalContent = document.querySelector('.modal-content');
    if (modal.classList.contains('show') && event.target === modal) {
        closeModal();
    }
}
</script><script type="module">import {
    Auth
}

from '/static/js/auth.js';

lucide.createIcons();

document.getElementById('login-form').addEventListener('submit', async (e)=> {
        e.preventDefault();
        const formData=new FormData(e.target);
        const data=Object.fromEntries(formData.entries());
        data.role = selectedRole;

        const result=await Auth.login(data.email, data.password);

        if (result.success) {
            if (result.user.role==='doctor') {
                window.location.href='/doctor/dashboard';
            }

            else if (result.user.role==='pharma') {
                window.location.href='/pharma/dashboard';
            }
            
            else if (result.user.role==='hospital') {
                window.location.href='/hospital/dashboard';
            }
            
            else if (result.user.role==='pharmacy') {
                window.location.href='/pharmacy/dashboard';
            }}

        else {
            // Show signup modal if login fails
            showModal();
        }});
</script></body></html>